var Showcaser=function(){"use strict";function __$styleInject(css,returnValue){if(typeof document==="undefined"){return returnValue}css=css||"";var head=document.head||document.getElementsByTagName("head")[0];var style=document.createElement("style");style.type="text/css";if(style.styleSheet){style.styleSheet.cssText=css}else{style.appendChild(document.createTextNode(css))}head.appendChild(style);return returnValue}__$styleInject(".showcaser-trap-scroll{overflow:hidden}.showcaser-container{position:absolute;opacity:0;top:0;left:0;bottom:0;right:0;z-index:1}.showcaser-container .showcaser-delay{transition-property:opacity;transition-timing-function:ease-in-out;transition-duration:1s;transition-delay:1.5s}.showcaser{position:absolute;border:1px solid #fff;box-shadow:0 0 0 99999px rgba(0,0,0,.65),inset 0 2px 16px rgba(0,0,0,.3)}.showcaser.full-screen{width:0;height:0;left:50%;top:50%;border:none}.showcaser-text-container{position:absolute;width:32em;max-width:75vw}.showcaser-text-container.right{left:100%;padding-left:2em}.showcaser-text-container.center{left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.showcaser-text-container.left{text-align:right;right:100%;padding-right:1em}.showcaser-text-container.bottom{top:100%;padding-top:1em}.showcaser-text-container.top{top:0;-webkit-transform:translateY(-100%);transform:translateY(-100%);padding-bottom:1em}.showcaser-text-container.middle{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.showcaser-text-container.center.middle{top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.showcaser-text-container.center.top{top:0;left:50%;-webkit-transform:translate(-50%,-100%);transform:translate(-50%,-100%)}.showcaser-text{color:#fff;font-size:1.3em;font-weight:400;letter-spacing:.05em}.showcaser-button-container{display:inline-block;position:relative;width:100%;margin-top:.5em;text-align:right}.showcaser-button-container .showcaser-button{cursor:pointer;margin-top:1em!important;width:auto!important;padding:10px;border-radius:5px;background-color:#f0f0f0;line-height:1;letter-spacing:.05em;font-size:1rem;transition:background-color .3s,color .3s}.showcaser-button-container .showcaser-button:hover{background-color:#197dc8;color:#fff;transition:background-color .3s,color .3s}.showcaser-button-container .showcaser-skip{color:#fff;cursor:pointer;left:100%;bottom:.3em;margin-left:1em;white-space:nowrap;text-decoration:underline;line-height:1.5;display:inline;font-size:1rem}.showcaser-button-container .showcaser-skip:hover{text-decoration:none}.showcaser-text-container.left .showcaser-skip{right:100%;left:auto;margin-right:1em}",undefined);var commonjsGlobal=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var performanceNow=createCommonjsModule(function(module){(function(){var getNanoSeconds,hrtime,loadTime;if(typeof performance!=="undefined"&&performance!==null&&performance.now){module.exports=function(){return performance.now()}}else if(typeof process!=="undefined"&&process!==null&&process.hrtime){module.exports=function(){return(getNanoSeconds()-loadTime)/1e6};hrtime=process.hrtime;getNanoSeconds=function(){var hr;hr=hrtime();return hr[0]*1e9+hr[1]};loadTime=getNanoSeconds()}else if(Date.now){module.exports=function(){return Date.now()-loadTime};loadTime=Date.now()}else{module.exports=function(){return(new Date).getTime()-loadTime};loadTime=(new Date).getTime()}}).call(commonjsGlobal)});var now=performanceNow;var root=typeof window==="undefined"?commonjsGlobal:window;var vendors=["moz","webkit"];var suffix="AnimationFrame";var raf=root["request"+suffix];var caf=root["cancel"+suffix]||root["cancelRequest"+suffix];for(var i=0;!raf&&i<vendors.length;i++){raf=root[vendors[i]+"Request"+suffix];caf=root[vendors[i]+"Cancel"+suffix]||root[vendors[i]+"CancelRequest"+suffix]}if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(callback){if(queue.length===0){var _now=now(),next=Math.max(0,frameDuration-(_now-last));last=next+_now;setTimeout(function(){var cp=queue.slice(0);queue.length=0;for(var i=0;i<cp.length;i++){if(!cp[i].cancelled){try{cp[i].callback(last)}catch(e){setTimeout(function(){throw e},0)}}}},Math.round(next))}queue.push({handle:++id,callback:callback,cancelled:false});return id};caf=function(handle){for(var i=0;i<queue.length;i++){if(queue[i].handle===handle){queue[i].cancelled=true}}}}var index=function(fn){return raf.call(root,fn)};var cancel=function(){caf.apply(root,arguments)};var polyfill=function(){root.requestAnimationFrame=raf;root.cancelAnimationFrame=caf};index.cancel=cancel;index.polyfill=polyfill;function smoothscroll(scrollTo,scrollDuration,finishCallback){var scrollAmount=0;if(typeof scrollTo==="string"||scrollTo instanceof Element){var scrollToObj=void 0;if(typeof scrollTo==="string"){scrollToObj=document.querySelector(scrollTo)}if(scrollToObj&&typeof scrollToObj.getBoundingClientRect==="function"){scrollAmount=window.pageYOffset+scrollToObj.getBoundingClientRect().top}else{throw new Error("No element found with the selector "+scrollAmount)}}if(scrollTo instanceof Element){scrollAmount=window.pageYOffset+scrollTo.getBoundingClientRect().top}if(typeof scrollDuration!=="number"||scrollDuration<0){scrollDuration=500}var cosParameter=(window.pageYOffset-scrollAmount)/2;var scrollCount=0;var oldTimestamp=window.performance.now();var step=function(newTimestamp){var tsDiff=newTimestamp-oldTimestamp;if(tsDiff>100){tsDiff=30}scrollCount+=Math.PI/(scrollDuration/tsDiff);if(scrollCount>=Math.PI){if(finishCallback){finishCallback()}return}var moveStep=Math.round(scrollAmount+cosParameter+cosParameter*Math.cos(scrollCount));window.scrollTo(0,moveStep);oldTimestamp=newTimestamp;index(step)};index(step)}var Showcaser=function(){function Showcaser(){}Showcaser.showcase=function(element,text,options){var args=this._sanitizeArgs(element,text,options);if(!args){throw new Error("Can't start Showcaser due to invalid options")}if(this._isVisible||this._showcaseQueue.length){this._showcaseQueue.push(args)}else{this._startShowcase(args)}};Showcaser.close=function(){this._cancelCheckInterval();if(this._container){document.body.removeChild(this._container)}this._releaseTrappedBodyScroll();if(this._args.options.close){this._args.options.close()}this._args=null;this._container=null;this._showcaser=null;this._textContainer=null;this._isVisible=false;this._lastPosition=null;if(this._showcaseQueue.length){var nextItem=this._showcaseQueue.shift();this._startShowcase(nextItem)}};Showcaser.skipAll=function(){this._showcaseQueue=[];var skip=this._args.options.skip;this.close();if(skip){skip()}};Object.defineProperty(Showcaser,"queueLength",{get:function(){return this._showcaseQueue.length},enumerable:true,configurable:true});Showcaser._start=function(args){var _this=this;this._args=args;this._isVisible=true;var container=document.createElement("div");var className="showcaser-container";if(args.options.longDelay){container.className=" showcaser-delay"}container.className=className;var showcaser=document.createElement("div");showcaser.className="showcaser";if(!args.element){showcaser.className+=" full-screen"}container.appendChild(showcaser);var textContainer=document.createElement("div");showcaser.appendChild(textContainer);var textElement=document.createElement("div");textElement.className="showcaser-text";textElement.textContent=args.text;textContainer.appendChild(textElement);var buttonContainer=document.createElement("div");buttonContainer.className="showcaser-button-container";textContainer.appendChild(buttonContainer);var showcaserButton=document.createElement("button");showcaserButton.className="showcaser-button waves-effect waves-light btn";showcaserButton.textContent=args.options.buttonText;showcaserButton.onclick=function(event){_this._nextButtonClick(event)};buttonContainer.appendChild(showcaserButton);if(args.options.allowSkip){var skipButton=document.createElement("div");skipButton.className="showcaser-skip";skipButton.onclick=function(event){_this._skipClick(event)};skipButton.textContent=args.options.skipText||"Skip";buttonContainer.appendChild(skipButton)}if(!this._isSafari()){var radiusString=args.options.shape==="circle"?"50%":"5px";showcaser.style.borderRadius=radiusString}document.body.appendChild(container);this._container=container;this._showcaser=showcaser;this._textContainer=textContainer;this._trapBodyScroll();this._scrollAndEnable()};Showcaser._isSafari=function(){return navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&!navigator.userAgent.match("CriOS")};Showcaser._setupCheckInterval=function(){var _this=this;if(this._args.options.positionTracker&&this._args.element&&!this._checkIntervalToken){this._checkIntervalToken=setInterval(function(){var newPosition=_this._args.element.getBoundingClientRect();var lastPosition=_this._lastPosition;if(newPosition.top!==lastPosition.top||newPosition.right!==lastPosition.right||newPosition.bottom!==lastPosition.bottom||newPosition.left!==lastPosition.left){_this._scrollAndEnable()}},200)}};Showcaser._cancelCheckInterval=function(){if(this._checkIntervalToken){clearInterval(this._checkIntervalToken);this._checkIntervalToken=null}};Showcaser._getWindowScrollPosition=function(){return window.pageYOffset};Showcaser._isElementVisible=function(elem){return!!(elem.offsetWidth||elem.offsetHeight||elem.getClientRects().length)};Showcaser._getElementPosition=function(elemL){return elemL.getBoundingClientRect()};Showcaser._scrollAndEnable=function(){var _this=this;if(this._args.element){var element=this._args.element;var rect=this._getElementPosition(element);var offsetTop=rect.top;if(!this._isElementVisible(element)){console.warn("Showcaser: Element not visible",this._args.element);this.close();return}var bufferPx=this._args.options.scrollBufferPx||15;var isElAboveViewport=offsetTop-bufferPx<this._getWindowScrollPosition();var isElBelowViewport=offsetTop+bufferPx+rect.height>this._getWindowScrollPosition()+(window.innerHeight||document.documentElement.clientHeight);var isScrolledToTop=window.pageYOffset===0;var isScrolledToBottom=window.innerHeight+window.pageYOffset>=document.body.offsetHeight;if(isElAboveViewport&&isElBelowViewport){this._positionAndShow()}else if(isElAboveViewport&&!isScrolledToTop){var scrollAmount=offsetTop-bufferPx;smoothscroll(scrollAmount,500,function(){return _this._positionAndShow()})}else if(isElBelowViewport&&!isScrolledToBottom){var scrollAmount=offsetTop-(window.innerHeight||document.documentElement.clientHeight)+rect.height+bufferPx;smoothscroll(scrollAmount,500,function(){return _this._positionAndShow()})}else{this._positionAndShow()}}else{this._positionAndShow()}};Showcaser._positionAndShow=function(){if(!this._args){return}var options=this._args.options;var element=this._args.element;if(element){var rect=this._lastPosition=element.getBoundingClientRect();if(!this._isElementVisible(element)){console.warn("Showcaser: Element not visible",this._args.element);this.close();return}var padding=typeof options.paddingPx!=="undefined"?options.paddingPx:20;if(options.shape==="circle"){var dimension=Math.round(rect.width>rect.height?rect.width:rect.height)+padding;this._showcaser.style.width=dimension+"px";this._showcaser.style.height=dimension+"px";var diff=rect.width>rect.height?rect.width-rect.height:rect.height-rect.width;if(rect.width>rect.height){this._showcaser.style.top=Math.round(rect.top-diff/2-padding/2)+"px";this._showcaser.style.left=Math.round(rect.left-padding/2)+"px"}else{this._showcaser.style.top=Math.round(rect.top-padding/2)+"px";this._showcaser.style.left=Math.round(rect.left-diff/2-padding/2)+"px"}}else if(options.shape==="rectangle"){this._showcaser.style.width=Math.round(rect.width+padding)+"px";this._showcaser.style.height=Math.round(rect.height+padding)+"px";this._showcaser.style.top=Math.round(rect.top-padding/2)+"px";this._showcaser.style.left=Math.round(rect.left-padding/2)+"px"}}if(options.position){var position=options.position;var horizontal=position.horizontal||"right";var vertical=position.vertical||"middle";this._applyPositionStyling(vertical,horizontal)}else{var vertical="top";var horizontal="center";this._applyPositionStyling(vertical,horizontal);var textElRect=this._textContainer.getBoundingClientRect();if(textElRect.top<0){vertical="bottom"}if(textElRect.left+textElRect.width>document.body.clientWidth){horizontal="left"}else if(textElRect.left<0){horizontal="right"}this._applyPositionStyling(vertical,horizontal)}this._container.style.opacity="1";this._setupCheckInterval()};Showcaser._applyPositionStyling=function(vertical,horizontal){var baseClassName="showcaser-text-container";this._textContainer.className=baseClassName+" "+vertical+" "+horizontal};Showcaser._trapBodyScroll=function(){document.body.className+=" showcaser-trap-scroll"};Showcaser._releaseTrappedBodyScroll=function(){document.body.className=document.body.className.replace(/(?:^|\s)showcaser-trap-scroll(?!\S)/g,"")};Showcaser._startShowcase=function(args){if(args.options.before){args.options.before()}this._start(args)};Showcaser._nextButtonClick=function(event){this.close();event.stopPropagation();return false};Showcaser._skipClick=function(event){this.skipAll();event.stopPropagation();return false};Showcaser._sanitizeArgs=function(element,text,options){if(!text){throw new Error("Must specify text to showcase")}if(!options){options={}}if(!options.shape){options.shape="circle"}if(!options.buttonText){options.buttonText="Got it"}if(typeof options.allowSkip!=="boolean"){options.allowSkip=true}return{element:element,text:text,options:options}};return Showcaser}();Showcaser._showcaseQueue=[];return Showcaser}();